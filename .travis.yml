language: node_js
version: "~> 1.0.0"
node_js:
- 14.16.1
cache: yarn
jobs:
  include:
  - stage: test
    script: yarn lint
  - stage: npm-bundle
    script: yarn build && npm version $TRAVIS_BRANCH --allow-same-version --allow-empty
    deploy:
      edge: true
      provider: npm
      email: bameyrick@gmail.com
      api_token:
        secure: ehcz2kU9Dz+xk6kb4iaFcaw1FKaw2qXnt9hFtmlWeX0YIJLNnl9XpGXkLlyqRmFhS556V8emDTM/FCT8+3zrO60OulfNwhv7480DEWr5a3OfT4NLLGdjYjy0n46CDl0EP1TRNDa/jvhMNyll0EEjEvMoc/dIIm2EnoHCnrQXh6uLybykNXT0H3YTMqI8iGQXHZfXU9VeqJk8Y/t7FaXagYubQMtYTmKaLmmP9cyIGsSBpVTREe/4zBGZlnlZW+yJx40da6o8SMER9Tr5MVWx8klMmw+k/QT7/mw8XY+7OlBNNvIOuEqp5v6clErcrshPTTICtUmItMxquM2uOmhnT5qOJYJOXFUkXRkIQK7BbCkqq8sNQW530170+7ovBUYxga3jUUga220gDbkgYCby6qmv+OqQdHwSik68mFKt5kpkP+GCDPhd/uxiSCTlaspM8dZxrTMabugVsVaIR9WgTwXtTs3Af2wwkqA1EYrCJYNRY+dompFo4VYNY2lLlblDIZVop8qhfqnB4v1XHDcWce//izctCJq8cJYbesMVDrVSHi4x9YfQnt44LSL3oZXQYxwRlJ7vQBWdZqpmWnKXYnnD5nrL94bLMJ3ngzEQV/3RuPHFQmSatZlqh9BOHXj8WgLS8CqCxjo0LMbxIO3LGVSAfCkTQ+44vg66uqF0SC0=
      on:
        tags: true
stages:
- name: test
  if: tag IS NOT present
- name: npm-bundle
  if: tag IS present
